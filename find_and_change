#include <stdio.h>
#include <string.h>
#include <stdlib.h>

long int filesize( FILE *fp ) {
    long int save_pos, size_of_file;

    save_pos = ftell( fp );
    fseek( fp, 0L, SEEK_END );
    size_of_file = ftell( fp );
    fseek( fp, save_pos, SEEK_SET );
    return( size_of_file );
  }

void main(){

    char word_for_change[256];
    char word_to_change[256];
    char name_file[30];

    printf ("Write name of your file, please\n");
    gets(name_file);

    printf ("Write word you want to change\n"); //кол-во символов в словах должно быть одинаково

    gets(word_for_change);

    printf ("Write word to change\n");

    gets(word_to_change);

    int length;
    length = strlen(word_for_change);

    char ch;
    char str[100000];
    int i = 0, j = 0;
    int kk = 0;
    int count = 0;


    FILE* fin ;

    fin = fopen(name_file, "r+");

    while ( count != filesize(fin) ) {   //считали все символы из файла
        ch = fgetc(fin);
        str[i] = ch;
        i++;
        count++;
    }
      for (i = 0; i < count; i++){    //найдём и заменим то, что надо, остальное не тронем
        for (j = 0; j < length; j++) {
            if (str[i] == word_for_change[j]){
                i++;
                kk++;

            }

            else {
                j = length;
                i = i - kk;
                kk = 0;
            }

        }
        i = i - kk;
        if (kk == length) {
             for (j = 0; j < length; j++) {
                str[i] = word_to_change[j];
                i++;
            }
            i = i - kk;
        }

    }

    fclose(fin);

    fin = fopen(name_file, "w");  //удалили всё из файла  

    fclose(fin);

    fin = fopen(name_file, "r+"); //записали в файл обратно всё то, что там было, НО с уже выполненной заменой слова
    fwrite (str, 1, count, fin);
    fclose(fin);

}
                                                                                                                                                                                         89,1        Внизу


